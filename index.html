<!DOCTYPE html>
<!-- Generated by build.js -->
<html>
<head>
<meta charset="UTF-8">
<title>Mouse memory doom</title>
<style>
body { margin: 0; }
canvas { width: 100%; height: calc(100vh - 40px); background: black; display: block; }
h1 { text-align: center; }
</style>
</head>
<body>
<h1>Mouse mermory doom</h1>
<div id="app">
  <canvas></canvas>
</div>
<script src="/vue.js"></script>
<script>
const{createApp,ref,onMounted}=Vue;createApp({setup(){const c=ref(null);let ctx;let p=[];const q=[];function r(e){const t=c.value.getBoundingClientRect();const x=e.clientX-t.left-t.width/2;const y=e.clientY-t.top-t.height/2;p.push({x,y,t:Date.now()});}function s(i){const base=255-Math.min(i,50)*5;const d=Math.max(0,base);return`rgb(${d},${d},${d})`;}function send(){if(p.length===0)return;fetch('/records',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({records:p})}).then(r=>r.json()).then(j=>{if(Array.isArray(j.records)){j.records.forEach(a=>{q.push({path:a,start:Date.now(),color:s(q.length)})});while(q.length>100)q.shift();}}).catch(()=>{});q.push({path:p,start:Date.now(),color:s(q.length)});while(q.length>100)q.shift();p=[];}function draw(){ctx.fillStyle='#000';ctx.fillRect(0,0,c.value.width,c.value.height);const n=Date.now();for(let i=0;i<q.length;i++){const a=q[i];const e=n-a.start;let pos=a.path[0];for(let j=0;j<a.path.length;j++){const step=a.path[j];if(e>=step.t-a.path[0].t){pos=step}else break}ctx.fillStyle=a.color;ctx.beginPath();ctx.arc(c.value.width/2+pos.x,c.value.height/2+pos.y,5,0,Math.PI*2);ctx.fill()}requestAnimationFrame(draw);}onMounted(()=>{const el=c.value=document.querySelector('#app canvas');el.width=el.clientWidth;el.height=el.clientHeight;ctx=el.getContext('2d');el.addEventListener('mousemove',r);setInterval(send,15000);draw();});return{canvas:c};}}).mount('#app');
</script>
</body>
</html>
