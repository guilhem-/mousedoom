<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Mouse memory doom</title><style>body {
         margin: 0;
         cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAYCAMAAAGzeb2oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADJUExURYmJiQAAAH19fSQkJD4+PtXV1WNjY3x8fC4uLvLy8uzs7FtbW3t7e+3t7f///+rq6lxcXHp6euvr611dXXl5eS8vL15eXu7u7mhoaO/v7+np6ejo6NLS0j09PXV1dbm5uQQEBDk5OTc3NzY2NkpKShMTE6qqqmdnZwEBAeXl5ZiYmC0tLfHx8XZ2dmRkZKamptvb2x4eHtra2m5ubm9vb01NTfT09CgoKEtLSz8/P8PDw8jIyHBwcP39/dHR0RAQEDg4OHR0dAAAAGkfIhoAAABDdFJOU////////////////////////////////////////////////////////////////////////////////////////wBBYgTvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBQYWludC5ORVQgNS4xLjgbaeqoAAAAtmVYSWZJSSoACAAAAAUAGgEFAAEAAABKAAAAGwEFAAEAAABSAAAAKAEDAAEAAAADAAAAMQECABAAAABaAAAAaYcEAAEAAABqAAAAAAAAAKOTAADoAwAAo5MAAOgDAABQYWludC5ORVQgNS4xLjgAAwAAkAcABAAAADAyMzABoAMAAQAAAAEAAAAFoAQAAQAAAJQAAAAAAAAAAgABAAIABAAAAFI5OAACAAcABAAAADAxMDAAAAAAuh84Q/mMLokAAADaSURBVBhXVY/pUgIxEIQbRV2FbTBkUcT1WA9UWE+8737/h7ImmxSSH5OvvslUTwAh8ygqSKCwJWRdCQXp8SwKkkxb21mhsyJh/loKqyvWl5Cxtx2gIOl8hL3x/gGms/rm1lpdSb8GzYyEdoLNToSc/QQcJOAwgZHBaJyXBud5eDObXPPO4EV6e48RP1ODVtwwHbTX1jeWRJaz17Hd/gnS9cN/gihCNN3ALwvSDYNaCHJn1y/E4dFxdXJanQUxmlxc8iqGo7x/mEuPT6yjaH2Eu/78+m5E46WYqj+8IEJA+sijaAAAAABJRU5ErkJggg==") 0 0, none;         }
         canvas { width: 100%; height: calc(100vh - 40px); background: black; display: block; }
         h1 { text-align: center; position: relative; }
         #overlay { position: absolute; right: 10px; top: 0; height: 40px; display: flex; align-items: center; gap: 10px; }
         #shadow {
         position: fixed;
         left: 0; top: 0;
         width: 16px; height: 24px;
         pointer-events: none; /* let clicks go through */
         z-index: 9999;
         background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAYCAMAAAGzeb2oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADJUExURYmJiQAAAH19fSQkJD4+PtXV1WNjY3x8fC4uLvLy8uzs7FtbW3t7e+3t7f///+rq6lxcXHp6euvr611dXXl5eS8vL15eXu7u7mhoaO/v7+np6ejo6NLS0j09PXV1dbm5uQQEBDk5OTc3NzY2NkpKShMTE6qqqmdnZwEBAeXl5ZiYmC0tLfHx8XZ2dmRkZKamptvb2x4eHtra2m5ubm9vb01NTfT09CgoKEtLSz8/P8PDw8jIyHBwcP39/dHR0RAQEDg4OHR0dAAAAGkfIhoAAABDdFJOU////////////////////////////////////////////////////////////////////////////////////////wBBYgTvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBQYWludC5ORVQgNS4xLjgbaeqoAAAAtmVYSWZJSSoACAAAAAUAGgEFAAEAAABKAAAAGwEFAAEAAABSAAAAKAEDAAEAAAADAAAAMQECABAAAABaAAAAaYcEAAEAAABqAAAAAAAAAKOTAADoAwAAo5MAAOgDAABQYWludC5ORVQgNS4xLjgAAwAAkAcABAAAADAyMzABoAMAAQAAAAEAAAAFoAQAAQAAAJQAAAAAAAAAAgABAAIABAAAAFI5OAACAAcABAAAADAxMDAAAAAAuh84Q/mMLokAAADaSURBVBhXVY/pUgIxEIQbRV2FbTBkUcT1WA9UWE+8737/h7ImmxSSH5OvvslUTwAh8ygqSKCwJWRdCQXp8SwKkkxb21mhsyJh/loKqyvWl5Cxtx2gIOl8hL3x/gGms/rm1lpdSb8GzYyEdoLNToSc/QQcJOAwgZHBaJyXBud5eDObXPPO4EV6e48RP1ODVtwwHbTX1jeWRJaz17Hd/gnS9cN/gihCNN3ALwvSDYNaCHJn1y/E4dFxdXJanQUxmlxc8iqGo7x/mEuPT6yjaH2Eu/78+m5E46WYqj+8IEJA+sijaAAAAABJRU5ErkJggg==") no-repeat;
         }
         .cursor {
         position: fixed;
         left: 0; top: 0;
         width: 16px; height: 24px;
         pointer-events: none;
         z-index: 9999;
         cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAYCAMAAAGzeb2oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACKUExURYmJiQAAAH19fSQkJD4+Pv8AJmNjY3x8fC4uLltbW3t7e1xcXHp6el1dXXl5eS8vL15eXmhoaD09PXV1dQQEBDk5OTc3NzY2NkpKShMTE6qqqmdnZwEBAZiYmC0tLXZ2dmRkZKamph4eHm5ubm9vb01NTSgoKEtLSz8/P3BwcBAQEDg4OHR0dAAAADDsBPUAAAAudFJOU////////////////////////////////////////////////////////////wCCj3NVAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBQYWludC5ORVQgNS4xLjgbaeqoAAAAtmVYSWZJSSoACAAAAAUAGgEFAAEAAABKAAAAGwEFAAEAAABSAAAAKAEDAAEAAAADAAAAMQECABAAAABaAAAAaYcEAAEAAABqAAAAAAAAAKOTAADoAwAAo5MAAOgDAABQYWludC5ORVQgNS4xLjgAAwAAkAcABAAAADAyMzABoAMAAQAAAAEAAAAFoAQAAQAAAJQAAAAAAAAAAgABAAIABAAAAFI5OAACAAcABAAAADAxMDAAAAAAuh84Q/mMLokAAAC9SURBVBhXXY+JUgIxEAUHpWUBycKK64GyCnji+//fs2aSVK2mUklXTzKHmaxJ1vYmGbGbhWQtJHsXMikifhCHv3I6fXayywuPS9bAdUALkCrAje0ZXiPBQtKPQ/4j2bQC8wosK7CqwLqCUwY6h0dPLGP3wsHhQ/LmosR57zApHdZlU65mf0QDzL23sYBlzBOijMIq/ROwDjUSsEkjsb3t7+77hyx2T/BcilvH8SS9wVDE5CvuAb6zyF4qVfULzY0qKefGo3oAAAAASUVORK5CYII=") 0 0, cross;
         }</style></head><body><h1>Mouse mermory doom</h1><div id="app"><div id="overlay"><span id="counter"></span> <button @click="clear">Clear</button></div><canvas></canvas></div><div id="shadow"></div><script src="vue.js"></script><script>const{createApp:createApp,ref:ref,onMounted:onMounted}=Vue;createApp({setup(){const t=ref(null),e=ref(0);let n,o,r,l=[];const c=[];function a(t){const e=document.createElement("div");return e.className="cursor",e.style.background=t,document.body.appendChild(e),e}function h(){e.value=c.length,r&&(r.textContent=String(e.value))}function s(e){const n=t.value.getBoundingClientRect(),o=e.clientX-n.left-n.width/2,r=e.clientY-n.top-n.height/2;l.push({x:o,y:r,t:Date.now()})}function i(t){const e=255-5*Math.min(t,50),n=Math.max(0,e);return`rgb(${n},${n},${n})`}function d(){if(0===l.length)return;fetch("/records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({records:l})}).then(t=>t.json()).then(t=>{if(Array.isArray(t.records)){for(t.records.forEach(t=>{const e=i(c.length);c.push({path:t,start:Date.now(),color:e,elem:a(e),trail:[]})});c.length>100;)c.shift();h()}}).catch(()=>{});const t=i(c.length);for(c.push({path:l,start:Date.now(),color:t,elem:a(t),trail:[]});c.length>100;){const t=c.shift();t.elem&&document.body.removeChild(t.elem)}h(),l=[]}function u(){n.fillStyle="#000",n.fillRect(0,0,t.value.width,t.value.height);const e=Date.now();for(let o=0;o<c.length;o++){const r=c[o],l=e-r.start;let a=r.path[0];for(let t=0;t<r.path.length;t++){const e=r.path[t];if(!(l>=e.t-r.path[0].t))break;a=e}const h=t.value.width/2+a.x,s=t.value.height/2+a.y;for(r.elem.style.left=h+"px",r.elem.style.top=s+"px",r.trail.push({x:h,y:s,t:e});r.trail.length&&e-r.trail[0].t>1e3;)r.trail.shift();n.strokeStyle=r.color,n.beginPath();for(let t=0;t<r.trail.length;t++){const e=r.trail[t];0===t?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y)}n.stroke()}requestAnimationFrame(u)}return onMounted(()=>{const e=t.value=document.querySelector("#app canvas");e.width=e.clientWidth,e.height=e.clientHeight,n=e.getContext("2d"),o=document.getElementById("shadow"),r=document.getElementById("counter"),document.addEventListener("mousemove",t=>{o.style.left=t.clientX+"px",o.style.top=t.clientY+"px"}),e.addEventListener("mousemove",s),setInterval(d,15e3),fetch("/records").then(t=>t.json()).then(t=>{if(Array.isArray(t.records)){for(t.records.forEach(t=>{const e=i(c.length);c.push({path:t,start:Date.now(),color:e,elem:a(e),trail:[]})});c.length>100;){const t=c.shift();t.elem&&document.body.removeChild(t.elem)}h()}}).catch(()=>{}),h(),u()}),{canvas:t,count:e,clear:function(){for(fetch("/records",{method:"DELETE"}).catch(()=>{});c.length;){const t=c.pop();t.elem&&document.body.removeChild(t.elem)}l=[],h()}}}}).mount("#app");</script></body></html>